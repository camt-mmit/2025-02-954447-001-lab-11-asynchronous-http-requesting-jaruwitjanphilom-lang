import{$ as c,A as st,B as K,C as re,D as Ut,E as h,F as lt,G as f,H as Y,I as V,J as F,K as g,L as r,M as o,N as D,O as A,P as m,Q as s,R as d,S as Ht,T as $t,U as zt,V as qt,W as Ae,X as O,Y as P,Z as _,_ as y,a as M,aa as I,b as k,ba as $,c as rt,ca as v,d as Rt,da as oe,e as It,ea as Wt,f as kt,fa as ae,g as Ot,ga as se,h as S,i as ee,j as C,k as ot,ka as G,la as Kt,ma as Yt,n as te,na as le,o as at,oa as x,pa as Zt,q as j,r as ie,s as b,t as Tt,u as Lt,v as l,w as jt,x as w,y as Bt,z as Gt}from"./chunk-QAPEBJAY.js";async function U(t,e=null){return t==null?null:await(await fetch(t,{signal:e})).json()}var de="https://swapi.dev/api";function Xt(t){return G(()=>({url:`${de}/people`,params:M({},t())}))}function Qt(t){return G(()=>`${de}/people/${t()}`)}function Jt(t){return G(()=>({url:`${de}/films`,params:M({},t())}))}function en(t){return G(()=>`${de}/films/${t()}`)}function tn(t){return G(()=>({url:`${de}/planets`,params:M({},t())}))}function nn(t){return G(()=>`${de}/planets/${t()}`)}function rn(t){return new URL(t).pathname.split("/").reverse().find(e=>e!=="")??null}function z(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>!!e))}var N=class t{transform(e){return e===null?null:rn(e)}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=Gt({name:"extractId",type:t,pure:!0})};var Un=t=>["people",t],Hn=t=>["planets",t],on=(t,e)=>e.url;function $n(t,e){if(t&1&&(r(0,"li")(1,"a",3),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit,i=m(3);l(),g("routerLink",P(5,Un,y(2,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.name)}}function zn(t,e){if(t&1&&(r(0,"ul"),V(1,$n,4,7,"li",null,on),o()),t&2){let n=m(2);l(),F(n.charactersResource.value())}}function qn(t,e){t&1&&(r(0,"span"),s(1,"None"),o())}function Wn(t,e){if(t&1&&h(0,zn,3,0,"ul")(1,qn,2,0,"span"),t&2){let n=m();f(n.charactersResource.value().length>0?0:1)}}function Kn(t,e){t&1&&(r(0,"span",2),s(1,"Loading"),o())}function Yn(t,e){if(t&1&&(r(0,"li")(1,"a",3),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit,i=m(3);l(),g("routerLink",P(5,Hn,y(2,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.name)}}function Zn(t,e){if(t&1&&(r(0,"ul"),V(1,Yn,4,7,"li",null,on),o()),t&2){let n=m(2);l(),F(n.planetsResource.value())}}function Xn(t,e){t&1&&(r(0,"span"),s(1,"None"),o())}function Qn(t,e){if(t&1&&h(0,Zn,3,0,"ul")(1,Xn,2,0,"span"),t&2){let n=m();f(n.planetsResource.value().length>0?0:1)}}function Jn(t,e){t&1&&(r(0,"span",2),s(1,"Loading"),o())}var Ne=class t{data=v.required();moduleRoute=v.required();charactersResource=$({params:()=>this.data().characters,loader:async({params:e,abortSignal:n})=>await Promise.all(e.map(async i=>await U(i,n)))}).asReadonly();planetsResource=$({params:()=>this.data().planets,loader:async({params:e,abortSignal:n})=>await Promise.all(e.map(async i=>await U(i,n)))}).asReadonly();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-film-view"]],inputs:{data:[1,"data"],moduleRoute:[1,"moduleRoute"]},decls:48,vars:16,consts:[[1,"_data-view"],[2,"white-space","pre-wrap","font-family","monospace","line-height","1.5","background-color","#222","color","#ffe81f","padding","1rem","border-radius","4px"],[1,"_status-loading"],[1,"app-cmp-link",3,"routerLink","relativeTo"]],template:function(n,i){n&1&&(D(0,"hr"),r(1,"dl",0)(2,"dt"),s(3,"Title"),o(),r(4,"dd"),s(5),o(),r(6,"dt"),s(7,"Episode ID"),o(),r(8,"dd"),s(9),o(),r(10,"dt"),s(11,"Director"),o(),r(12,"dd"),s(13),o(),r(14,"dt"),s(15,"Producer"),o(),r(16,"dd"),s(17),o(),r(18,"dt"),s(19,"Release Date"),o(),r(20,"dd"),s(21),_(22,"date"),o(),r(23,"dt"),s(24,"Opening Crawl"),o(),r(25,"dd",1),s(26),o(),r(27,"dt"),s(28,"Characters"),o(),r(29,"dd"),h(30,Wn,2,1)(31,Kn,2,0,"span",2),o(),r(32,"dt"),s(33,"Planets"),o(),r(34,"dd"),h(35,Qn,2,1)(36,Jn,2,0,"span",2),o(),r(37,"dt"),s(38,"Created"),o(),r(39,"dd"),s(40),_(41,"date"),o(),r(42,"dt"),s(43,"Edited"),o(),r(44,"dd"),s(45),_(46,"date"),o()(),D(47,"hr")),n&2&&(l(5),d(i.data().title),l(4),d(i.data().episode_id),l(4),d(i.data().director),l(4),d(i.data().producer),l(4),d(y(22,10,i.data().release_date)),l(5),Ht(" ",i.data().opening_crawl," "),l(4),f(i.charactersResource.hasValue()?30:i.charactersResource.isLoading()?31:-1),l(5),f(i.planetsResource.hasValue()?35:i.planetsResource.isLoading()?36:-1),l(5),d(y(41,12,i.data().created)),l(5),d(y(46,14,i.data().edited)))},dependencies:[x,ae,N],encapsulation:2,changeDetection:0})};var Z=new ee("module-route");function ei(t,e){t&1&&(r(0,"b",1),s(1,"Error"),o())}function ti(t,e){t&1&&(r(0,"b",2),s(1,"Loading"),o())}function ni(t,e){if(t&1&&D(0,"app-film-view",6),t&2){let n=m();g("data",n.resource.value())("moduleRoute",n.moduleRoute)}}function ii(t,e){t&1&&(r(0,"p",7),s(1),o()),t&2&&(l(),d(e.message))}var Re=class t{id=v.required();moduleRoute=C(Z);resource=en(this.id).asReadonly();location=C(oe);goBack(){this.location.back()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-film-view-page"]],inputs:{id:[1,"id"]},decls:13,vars:2,consts:[[1,"_page-navigation"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cmp-nav"],["type","button",3,"click"],[1,"material-symbols-outlined"],[3,"data","moduleRoute"],[1,"_error-message"]],template:function(n,i){if(n&1&&(r(0,"header")(1,"nav",0)(2,"span"),h(3,ei,2,0,"b",1)(4,ti,2,0,"b",2),o(),r(5,"ul",3)(6,"li")(7,"button",4),A("click",function(){return i.goBack()}),r(8,"i",5),s(9,"chevron_backward"),o(),s(10," Back "),o()()()()(),h(11,ni,1,2,"app-film-view",6)(12,ii,2,1,"p",7)),n&2){let a;l(3),f(i.resource.error()?3:i.resource.isLoading()?4:-1),l(8),f(i.resource.hasValue()?11:(a=i.resource.error())?12:-1,a)}},dependencies:[Ne],encapsulation:2,changeDetection:0})};var ln=new ee("");function ct(t){return t==null||pt(t)===0}function pt(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var ri=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ke=class{static min(e){return oi(e)}static max(e){return ai(e)}static required(e){return si(e)}static requiredTrue(e){return li(e)}static email(e){return di(e)}static minLength(e){return ui(e)}static maxLength(e){return ci(e)}static pattern(e){return pi(e)}static nullValidator(e){return dn()}static compose(e){return fn(e)}static composeAsync(e){return _n(e)}};function oi(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function ai(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function si(t){return ct(t.value)?{required:!0}:null}function li(t){return t.value===!0?null:{required:!0}}function di(t){return ct(t.value)||ri.test(t.value)?null:{email:!0}}function ui(t){return e=>{let n=e.value?.length??pt(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function ci(t){return e=>{let n=e.value?.length??pt(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function pi(t){if(!t)return dn;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(ct(i.value))return null;let a=i.value;return e.test(a)?null:{pattern:{requiredPattern:n,actualValue:a}}}}function dn(t){return null}function un(t){return t!=null}function cn(t){return st(t)?It(t):t}function pn(t){let e={};return t.forEach(n=>{e=n!=null?M(M({},e),n):e}),Object.keys(e).length===0?null:e}function mn(t,e){return e.map(n=>n(t))}function mi(t){return!t.validate}function hn(t){return t.map(e=>mi(e)?e:n=>e.validate(n))}function fn(t){if(!t)return null;let e=t.filter(un);return e.length==0?null:function(n){return pn(mn(n,e))}}function gn(t){return t!=null?fn(hn(t)):null}function _n(t){if(!t)return null;let e=t.filter(un);return e.length==0?null:function(n){let i=mn(n,e).map(cn);return Ot(i).pipe(kt(pn))}}function yn(t){return t!=null?_n(hn(t)):null}function dt(t){return t?Array.isArray(t)?t:[t]:[]}function Oe(t,e){return Array.isArray(t)?t.includes(e):t===e}function an(t,e){let n=dt(e);return dt(t).forEach(a=>{Oe(n,a)||n.push(a)}),n}function sn(t,e){return dt(e).filter(n=>!Oe(t,n))}var ut=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var Te=class extends ut{_parent=null;name=null;valueAccessor=null};var Ce="VALID",Ie="INVALID",ue="PENDING",be="DISABLED",pe=class{},Le=class extends pe{value;source;constructor(e,n){super(),this.value=e,this.source=n}},we=class extends pe{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},De=class extends pe{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},ce=class extends pe{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function hi(t){return Array.isArray(t)?gn(t):t||null}function fi(t){return Array.isArray(t)?yn(t):t||null}function gi(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var je=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return b(this.statusReactive)}set status(e){b(()=>this.statusReactive.set(e))}_status=c(()=>this.statusReactive());statusReactive=j(void 0);get valid(){return this.status===Ce}get invalid(){return this.status===Ie}get pending(){return this.status==ue}get disabled(){return this.status===be}get enabled(){return this.status!==be}errors;get pristine(){return b(this.pristineReactive)}set pristine(e){b(()=>this.pristineReactive.set(e))}_pristine=c(()=>this.pristineReactive());pristineReactive=j(!0);get dirty(){return!this.pristine}get touched(){return b(this.touchedReactive)}set touched(e){b(()=>this.touchedReactive.set(e))}_touched=c(()=>this.touchedReactive());touchedReactive=j(!1);get untouched(){return!this.touched}_events=new Rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(an(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(an(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sn(e,this._rawAsyncValidators))}hasValidator(e){return Oe(this._rawValidators,e)}hasAsyncValidator(e){return Oe(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(k(M({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new De(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new De(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(k(M({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new we(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(a=>{a.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new we(!0,i))}markAsPending(e={}){this.status=ue;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ce(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(k(M({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=be,this.errors=null,this._forEachChild(a=>{a.disable(k(M({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Le(this.value,i)),this._events.next(new ce(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(k(M({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(a=>a(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ce,this._forEachChild(i=>{i.enable(k(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(k(M({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ce||this.status===ue)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Le(this.value,n)),this._events.next(new ce(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(k(M({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?be:Ce}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ue,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let i=cn(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(a=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(a,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,a)=>i&&i._find(a),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new ce(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?be:this.errors?Ie:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ue)?ue:this._anyControlsHaveStatus(Ie)?Ie:Ce}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),a=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),a&&this._events.next(new we(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new De(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gi(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=hi(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=fi(this._rawAsyncValidators)}};var mt=0;function _i(){return mt}function X(t,e){return(...n)=>{try{return mt=e,t(...n)}finally{mt=0}}}function yi(t){return!t}function vn(t){return t}function H(t){return Array.isArray(t)}function me(t){return(typeof t=="object"||typeof t=="function")&&t!=null}var Q=Symbol(),ze=Symbol(),Pe=class{predicates;fns=[];constructor(e){this.predicates=e}push(e){this.fns.push(Cn(this.predicates,e))}mergeIn(e){let n=this.predicates?e.fns.map(i=>Cn(this.predicates,i)):e.fns;this.fns.push(...n)}},Ge=class extends Pe{get defaultValue(){return!1}compute(e){return this.fns.some(n=>{let i=n(e);return i&&i!==ze})}},he=class t extends Pe{ignore;static ignoreNull(e){return new t(e,n=>n===null)}constructor(e,n){super(e),this.ignore=n}get defaultValue(){return[]}compute(e){return this.fns.reduce((n,i)=>{let a=i(e);return a===void 0||a===ze?n:H(a)?[...n,...this.ignore?a.filter(u=>!this.ignore(u)):a]:this.ignore&&this.ignore(a)?n:[...n,a]},[])}},ht=class extends he{constructor(e){super(e,void 0)}},ft=class extends Pe{key;get defaultValue(){return this.key.reducer.getInitial()}constructor(e,n){super(e),this.key=n}compute(e){if(this.fns.length===0)return this.key.reducer.getInitial();let n=this.key.reducer.getInitial();for(let i=0;i<this.fns.length;i++){let a=this.fns[i](e);a!==ze&&(n=this.key.reducer.reduce(n,a))}return n}};function Cn(t,e){return t.length===0?e:n=>{for(let i of t){let a=n.stateOf(i.path),u=b(a.structure.pathKeys).length-i.depth;for(let p=0;p<u;p++)a=a.structure.parent;if(!i.fn(a.context))return ze}return e(n)}}var fe=class{predicates;hidden;disabledReasons;readonly;syncErrors;syncTreeErrors;asyncErrors;metadata=new Map;constructor(e){this.predicates=e,this.hidden=new Ge(e),this.disabledReasons=new ht(e),this.readonly=new Ge(e),this.syncErrors=he.ignoreNull(e),this.syncTreeErrors=he.ignoreNull(e),this.asyncErrors=he.ignoreNull(e)}hasMetadata(e){return this.metadata.has(e)}getMetadataKeys(){return this.metadata.keys()}getMetadata(e){return this.metadata.has(e)||this.metadata.set(e,new ft(this.predicates,e)),this.metadata.get(e)}mergeIn(e){this.hidden.mergeIn(e.hidden),this.disabledReasons.mergeIn(e.disabledReasons),this.readonly.mergeIn(e.readonly),this.syncErrors.mergeIn(e.syncErrors),this.syncTreeErrors.mergeIn(e.syncTreeErrors),this.asyncErrors.mergeIn(e.asyncErrors);for(let n of e.getMetadataKeys()){let i=e.metadata.get(n);this.getMetadata(n).mergeIn(i)}}},Ue=class{depth;constructor(e){this.depth=e}build(){return new He(this,[],0)}},ge=class t extends Ue{constructor(e){super(e)}current;all=[];addHiddenRule(e){this.getCurrent().addHiddenRule(e)}addDisabledReasonRule(e){this.getCurrent().addDisabledReasonRule(e)}addReadonlyRule(e){this.getCurrent().addReadonlyRule(e)}addSyncErrorRule(e){this.getCurrent().addSyncErrorRule(e)}addSyncTreeErrorRule(e){this.getCurrent().addSyncTreeErrorRule(e)}addAsyncErrorRule(e){this.getCurrent().addAsyncErrorRule(e)}addMetadataRule(e,n){this.getCurrent().addMetadataRule(e,n)}getChild(e){if(e===Q){let n=this.getCurrent().children;n.size>(n.has(Q)?1:0)&&(this.current=void 0)}return this.getCurrent().getChild(e)}hasLogic(e){return this===e?!0:this.all.some(({builder:n})=>n.hasLogic(e))}mergeIn(e,n){n?this.all.push({builder:e,predicate:{fn:X(n.fn,this.depth),path:n.path}}):this.all.push({builder:e}),this.current=void 0}getCurrent(){return this.current===void 0&&(this.current=new xe(this.depth),this.all.push({builder:this.current})),this.current}static newRoot(){return new t(0)}},xe=class extends Ue{logic=new fe([]);children=new Map;constructor(e){super(e)}addHiddenRule(e){this.logic.hidden.push(X(e,this.depth))}addDisabledReasonRule(e){this.logic.disabledReasons.push(X(e,this.depth))}addReadonlyRule(e){this.logic.readonly.push(X(e,this.depth))}addSyncErrorRule(e){this.logic.syncErrors.push(X(e,this.depth))}addSyncTreeErrorRule(e){this.logic.syncTreeErrors.push(X(e,this.depth))}addAsyncErrorRule(e){this.logic.asyncErrors.push(X(e,this.depth))}addMetadataRule(e,n){this.logic.getMetadata(e).push(X(n,this.depth))}getChild(e){return this.children.has(e)||this.children.set(e,new ge(this.depth+1)),this.children.get(e)}hasLogic(e){return this===e}},He=class t{builder;predicates;depth;logic;constructor(e,n,i){this.builder=e,this.predicates=n,this.depth=i,this.logic=e?vi(e,n,i):new fe([])}getChild(e){let n=this.builder?wn(this.builder,e):[];if(n.length===0)return new t(void 0,[],this.depth+1);if(n.length===1){let{builder:i,predicates:a}=n[0];return new t(i,[...this.predicates,...a.map(u=>_t(u,this.depth))],this.depth+1)}else{let i=n.map(({builder:a,predicates:u})=>new t(a,[...this.predicates,...u.map(p=>_t(p,this.depth))],this.depth+1));return new gt(i)}}hasLogic(e){return this.builder?.hasLogic(e)??!1}},gt=class t{all;logic;constructor(e){this.all=e,this.logic=new fe([]);for(let n of e)this.logic.mergeIn(n.logic)}getChild(e){return new t(this.all.flatMap(n=>n.getChild(e)))}hasLogic(e){return this.all.some(n=>n.hasLogic(e))}};function wn(t,e){if(t instanceof ge)return t.all.flatMap(({builder:n,predicate:i})=>{let a=wn(n,e);return i?a.map(({builder:u,predicates:p})=>({builder:u,predicates:[...p,i]})):a});if(t instanceof xe)return[...e!==Q&&t.children.has(Q)?[{builder:t.getChild(Q),predicates:[]}]:[],...t.children.has(e)?[{builder:t.getChild(e),predicates:[]}]:[]];throw new S(1909,!1)}function vi(t,e,n){let i=new fe(e);if(t instanceof ge){let a=t.all.map(({builder:u,predicate:p})=>new He(u,p?[...e,_t(p,n)]:e,n));for(let u of a)i.mergeIn(u.logic)}else if(t instanceof xe)i.mergeIn(t.logic);else throw new S(1909,!1);return i}function _t(t,e){return k(M({},t),{depth:e})}var Dn=Symbol("PATH"),B=class t{keys;parent;keyInParent;root;children=new Map;fieldPathProxy=new Proxy(this,Ci);logicBuilder;constructor(e,n,i,a){this.keys=e,this.parent=i,this.keyInParent=a,this.root=n??this,i||(this.logicBuilder=ge.newRoot())}get builder(){return this.logicBuilder?this.logicBuilder:this.parent.builder.getChild(this.keyInParent)}getChild(e){return this.children.has(e)||this.children.set(e,new t([...this.keys,e],this.root,this,e)),this.children.get(e)}mergeIn(e,n){let i=e.compile();this.builder.mergeIn(i.builder,n)}static unwrapFieldPath(e){return e[Dn]}static newRoot(){return new t([],void 0,void 0,void 0)}},Ci={get(t,e){return e===Dn?t:t.getChild(e).fieldPathProxy}},Be,Me=new Map,Ee=class t{schemaFn;constructor(e){this.schemaFn=e}compile(){if(Me.has(this))return Me.get(this);let e=B.newRoot();Me.set(this,e);let n=Be;try{Be=e,this.schemaFn(e.fieldPathProxy)}finally{Be=n}return e}static create(e){return e instanceof t?e:new t(e)}static rootCompile(e){try{return Me.clear(),e===void 0?B.newRoot():e instanceof t?e.compile():new t(e).compile()}finally{Me.clear()}}};function bi(t){return t instanceof Ee||typeof t=="function"}function Fe(t){if(Be!==B.unwrapFieldPath(t).root)throw new S(1908,!1)}function St(t,e,n){return Fe(t),B.unwrapFieldPath(t).builder.addMetadataRule(e,n),e}var q={list(){return{reduce:(t,e)=>e===void 0?t:[...t,e],getInitial:()=>[]}},min(){return{reduce:(t,e)=>t===void 0||e===void 0?t??e:Math.min(t,e),getInitial:()=>{}}},max(){return{reduce:(t,e)=>t===void 0||e===void 0?t??e:Math.max(t,e),getInitial:()=>{}}},or(){return{reduce:(t,e)=>t||e,getInitial:()=>!1}},and(){return{reduce:(t,e)=>t&&e,getInitial:()=>!0}},override:wi};function wi(t){return{reduce:(e,n)=>n,getInitial:()=>t?.()}}var Se=class{reducer;create;brand;constructor(e,n){this.reducer=e,this.create=n}};function J(t){return new Se(t??q.override())}function Vt(t,e){return new Se(e??q.override(),t)}var Mn=J(q.or()),Pn=J(q.max()),xn=J(q.min()),En=J(q.max()),Sn=J(q.min()),Vn=J(q.list());function Di(t){return t.errors().length>0?"invalid":t.pending()?"unknown":"valid"}var yt=class{node;constructor(e){this.node=e}rawSyncTreeErrors=c(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncTreeErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawSyncTreeErrors()??[]]);syncErrors=c(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncErrors.compute(this.node.context),...this.syncTreeErrors(),...Mi(this.node.submitState.submissionErrors())]);syncValid=c(()=>this.shouldSkipValidation()?!0:this.node.structure.reduceChildren(this.syncErrors().length===0,(e,n)=>n&&e.validationState.syncValid(),yi));syncTreeErrors=c(()=>this.rawSyncTreeErrors().filter(e=>e.fieldTree===this.node.fieldProxy));rawAsyncErrors=c(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.asyncErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawAsyncErrors()??[]]);asyncErrors=c(()=>this.shouldSkipValidation()?[]:this.rawAsyncErrors().filter(e=>e==="pending"||e.fieldTree===this.node.fieldProxy));errors=c(()=>[...this.syncErrors(),...this.asyncErrors().filter(e=>e!=="pending")]);errorSummary=c(()=>this.node.structure.reduceChildren(this.errors(),(e,n)=>[...n,...e.errorSummary()]));pending=c(()=>this.node.structure.reduceChildren(this.asyncErrors().includes("pending"),(e,n)=>n||e.validationState.asyncErrors().includes("pending")));status=c(()=>{if(this.shouldSkipValidation())return"valid";let e=Di(this);return this.node.structure.reduceChildren(e,(n,i)=>i==="invalid"||n.validationState.status()==="invalid"?"invalid":i==="unknown"||n.validationState.status()==="unknown"?"unknown":"valid",n=>n==="invalid")});valid=c(()=>this.status()==="valid");invalid=c(()=>this.status()==="invalid");shouldSkipValidation=c(()=>this.node.hidden()||this.node.disabled()||this.node.readonly())};function Mi(t){return t===void 0?[]:H(t)?t:[t]}function Fn(t,e){if(H(t))for(let n of t)n.fieldTree??=e;else t&&(t.fieldTree??=e);return t}var vt=J(),Ct=class{node;cache=new WeakMap;constructor(e){this.node=e}resolve(e){if(!this.cache.has(e)){let n=c(()=>{let i=B.unwrapFieldPath(e),a=this.node,u=_i();for(;u>0||!a.structure.logic.hasLogic(i.root.builder);)if(u--,a=a.structure.parent,a===void 0)throw new S(1900,!1);for(let p of i.keys)if(a=a.structure.getChild(p),a===void 0)throw new S(1901,!1);return a.fieldProxy});this.cache.set(e,n)}return this.cache.get(e)()}get fieldTree(){return this.node.fieldProxy}get state(){return this.node}get value(){return this.node.structure.value}get key(){return this.node.structure.keyInParent}get pathKeys(){return this.node.structure.pathKeys}index=c(()=>{let e=this.key();if(!H(b(this.node.structure.parent.value)))throw new S(1906,!1);return Number(e)});fieldTreeOf=e=>this.resolve(e);stateOf=e=>this.resolve(e)();valueOf=e=>{let n=this.resolve(e)().value();if(n instanceof je)throw new S(1907,!1);return n}},bt=class{node;metadata=new Map;constructor(e){this.node=e;for(let n of this.node.logicNode.logic.getMetadataKeys())if(n.create){let i=this.node.logicNode.logic.getMetadata(n),a=b(()=>ot(this.node.structure.injector,()=>n.create(c(()=>i.compute(this.node.context)))));this.metadata.set(n,a)}}get(e){if(this.has(e)&&!this.metadata.has(e)){if(e.create)throw new S(1912,!1);let n=this.node.logicNode.logic.getMetadata(e);this.metadata.set(e,c(()=>n.compute(this.node.context)))}return this.metadata.get(e)}has(e){return this.node.logicNode.logic.hasMetadata(e)}},Pi={get(t,e,n){let i=t(),a=i.structure.getChild(e);if(a!==void 0)return a.fieldProxy;let u=b(i.value);if(H(u)){if(e==="length")return i.value().length;if(e===Symbol.iterator)return()=>(i.value(),Array.prototype[Symbol.iterator].apply(i.fieldProxy))}if(me(u)&&e===Symbol.iterator)return function*(){for(let p in n)yield[p,n[p]]}},getOwnPropertyDescriptor(t,e){let n=b(t().value),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&!i.configurable&&(i.configurable=!0),i},ownKeys(t){let e=b(t().value);return typeof e=="object"&&e!==null?Reflect.ownKeys(e):[]}};function xi(t,e){let n=c(()=>t()[e()]);return n[rt]=t[rt],n.set=i=>{t.update(a=>Ei(a,i,e()))},n.update=i=>{n.set(i(b(n)))},n.asReadonly=()=>n,n}function Ei(t,e,n){if(H(t)){let i=[...t];return i[n]=e,i}else return k(M({},t),{[n]:e})}var $e=class{logic;node;createChildNode;identitySymbol=Symbol();_injector=void 0;get injector(){return this._injector??=te.create({providers:[],parent:this.fieldManager.injector}),this._injector}constructor(e,n,i){this.logic=e,this.node=n,this.createChildNode=i}children(){let e=this.childrenMap();return e===void 0?[]:Array.from(e.byPropertyKey.values()).map(n=>b(n.reader))}getChild(e){let n=e.toString(),i=b(this.childrenMap)?.byPropertyKey.get(n)?.reader;return i||(i=this.createReader(n)),i()}reduceChildren(e,n,i){let a=this.childrenMap();if(!a)return e;let u=e;for(let p of a.byPropertyKey.values()){if(i?.(u))break;u=n(b(p.reader),u)}return u}destroy(){this.injector.destroy()}createKeyInParent(e,n,i){if(e.kind==="root")return An;if(n===void 0){let a=i;return c(()=>{if(this.parent.structure.getChild(a)!==this.node)throw new S(1902,!1);return a})}else{let a=i;return c(()=>{let u=this.parent.structure.value();if(!H(u))throw new S(1903,!1);let p=u[a];if(me(p)&&p.hasOwnProperty(this.parent.structure.identitySymbol)&&p[this.parent.structure.identitySymbol]===n)return a;for(let E=0;E<u.length;E++){let L=u[E];if(me(L)&&L.hasOwnProperty(this.parent.structure.identitySymbol)&&L[this.parent.structure.identitySymbol]===n)return a=E.toString()}throw new S(1904,!1)})}}createChildrenMap(){return I({source:this.value,computation:(e,n)=>{if(!me(e))return;let i=n?.value??{byPropertyKey:new Map},a,u=H(e);i!==void 0&&(u?a=Vi(i,e,this.identitySymbol):a=Fi(i,e));for(let p of Object.keys(e)){let E,L=e[p];if(L===void 0){i.byPropertyKey.has(p)&&(a??=M({},i),a.byPropertyKey.delete(p));continue}u&&me(L)&&!H(L)&&(E=L[this.identitySymbol]??=Symbol(""));let ve;E&&(i.byTrackingKey?.has(E)||(a??=M({},i),a.byTrackingKey??=new Map,a.byTrackingKey.set(E,this.createChildNode(p,E,u))),ve=(a??i).byTrackingKey.get(E));let it=i.byPropertyKey.get(p);it===void 0?(a??=M({},i),a.byPropertyKey.set(p,{reader:this.createReader(p),node:ve??this.createChildNode(p,E,u)})):ve&&ve!==it.node&&(a??=M({},i),it.node=ve)}return a??i}})}createReader(e){return c(()=>this.childrenMap()?.byPropertyKey.get(e)?.node)}},wt=class extends $e{fieldManager;value;get parent(){}get root(){return this.node}get pathKeys(){return Si}get keyInParent(){return An}childrenMap;constructor(e,n,i,a,u){super(n,e,u),this.fieldManager=i,this.value=a,this.childrenMap=this.createChildrenMap()}},Dt=class extends $e{logic;parent;root;pathKeys;keyInParent;value;childrenMap;get fieldManager(){return this.root.structure.fieldManager}constructor(e,n,i,a,u,p){super(n,e,p),this.logic=n,this.parent=i,this.root=this.parent.structure.root,this.keyInParent=this.createKeyInParent({kind:"child",parent:i,pathNode:void 0,logic:n,initialKeyInParent:u,identityInParent:a,fieldAdapter:void 0},a,u),this.pathKeys=c(()=>[...i.structure.pathKeys(),this.keyInParent()]),this.value=xi(this.parent.structure.value,this.keyInParent),this.childrenMap=this.createChildrenMap(),this.fieldManager.structures.add(this)}};var Si=c(()=>[]),An=c(()=>{throw new S(1905,!1)});function Vi(t,e,n){let i,a=new Set(t.byPropertyKey.keys()),u=new Set(t.byTrackingKey?.keys());for(let p=0;p<e.length;p++){let E=e[p];a.delete(p.toString()),me(E)&&E.hasOwnProperty(n)&&u.delete(E[n])}if(a.size>0){i??=M({},t);for(let p of a)i.byPropertyKey.delete(p)}if(u.size>0){i??=M({},t);for(let p of u)i.byTrackingKey?.delete(p)}return i}function Fi(t,e){let n;for(let i of t.byPropertyKey.keys())e.hasOwnProperty(i)||(n??=M({},t),n.byPropertyKey.delete(i));return n}var Mt=class{node;selfSubmitting=j(!1);submissionErrors;constructor(e){this.node=e,this.submissionErrors=I({source:this.node.structure.value,computation:()=>[]})}submitting=c(()=>this.selfSubmitting()||(this.node.structure.parent?.submitting()??!1))},Ve=class{structure;validationState;metadataState;nodeState;submitState;fieldAdapter;_context=void 0;get context(){return this._context??=new Ct(this)}fieldProxy=new Proxy(()=>this,Pi);pathNode;constructor(e){this.pathNode=e.pathNode,this.fieldAdapter=e.fieldAdapter,this.structure=this.fieldAdapter.createStructure(this,e),this.validationState=this.fieldAdapter.createValidationState(this,e),this.nodeState=this.fieldAdapter.createNodeState(this,e),this.metadataState=new bt(this),this.submitState=new Mt(this)}focusBoundControl(){this.getBindingForFocus()?.focus()}getBindingForFocus(){let e=this.formFieldBindings().filter(n=>n.focus!==void 0).reduce(bn,void 0);return e||this.structure.children().map(n=>n.getBindingForFocus()).reduce(bn,void 0)}pendingSync=I({source:()=>this.value(),computation:(e,n)=>{n?.value?.abort()}});get logicNode(){return this.structure.logic}get value(){return this.structure.value}_controlValue=I(()=>this.value());get controlValue(){return this._controlValue.asReadonly()}get keyInParent(){return this.structure.keyInParent}get errors(){return this.validationState.errors}get errorSummary(){return this.validationState.errorSummary}get pending(){return this.validationState.pending}get valid(){return this.validationState.valid}get invalid(){return this.validationState.invalid}get dirty(){return this.nodeState.dirty}get touched(){return this.nodeState.touched}get disabled(){return this.nodeState.disabled}get disabledReasons(){return this.nodeState.disabledReasons}get hidden(){return this.nodeState.hidden}get readonly(){return this.nodeState.readonly}get formFieldBindings(){return this.nodeState.formFieldBindings}get submitting(){return this.submitState.submitting}get name(){return this.nodeState.name}get max(){return this.metadata(xn)}get maxLength(){return this.metadata(Sn)}get min(){return this.metadata(Pn)}get minLength(){return this.metadata(En)}get pattern(){return this.metadata(Vn)??Ai}get required(){return this.metadata(Mn)??Ni}metadata(e){return this.metadataState.get(e)}hasMetadata(e){return this.metadataState.has(e)}markAsTouched(){b(()=>{this.nodeState.markAsTouched(),this.flushSync()})}markAsDirty(){this.nodeState.markAsDirty()}reset(e){b(()=>this._reset(e))}_reset(e){e!==void 0&&this.value.set(e),this.nodeState.markAsUntouched(),this.nodeState.markAsPristine();for(let n of this.structure.children())n._reset()}setControlValue(e){b(()=>{this._controlValue.set(e),this.markAsDirty(),this.debounceSync()})}sync(){this.value.set(this.controlValue())}flushSync(){let e=this.pendingSync();e&&!e.signal.aborted&&(e.abort(),this.sync())}async debounceSync(){this.pendingSync()?.abort();let e=this.nodeState.debouncer();if(e){let n=new AbortController,i=e(n.signal);if(i&&(this.pendingSync.set(n),await i,n.signal.aborted))return}this.sync()}static newRoot(e,n,i,a){return a.newRoot(e,n,i,a)}createStructure(e){return e.kind==="root"?new wt(this,e.logic,e.fieldManager,e.value,this.newChild.bind(this)):new Dt(this,e.logic,e.parent,e.identityInParent,e.initialKeyInParent,this.newChild.bind(this))}newChild(e,n,i){let a,u;return i?(a=this.pathNode.getChild(Q),u=this.structure.logic.getChild(Q)):(a=this.pathNode.getChild(e),u=this.structure.logic.getChild(e)),this.fieldAdapter.newChild({kind:"child",parent:this,pathNode:a,logic:u,initialKeyInParent:e,identityInParent:n,fieldAdapter:this.fieldAdapter})}},Ai=c(()=>[]),Ni=c(()=>!1);function bn(t,e){return t?e&&t.element.compareDocumentPosition(e.element)&Node.DOCUMENT_POSITION_PRECEDING?e:t:e}var Pt=class{node;selfTouched=j(!1);selfDirty=j(!1);markAsTouched(){this.selfTouched.set(!0)}markAsDirty(){this.selfDirty.set(!0)}markAsPristine(){this.selfDirty.set(!1)}markAsUntouched(){this.selfTouched.set(!1)}formFieldBindings=j([]);constructor(e){this.node=e}dirty=c(()=>{let e=this.selfDirty()&&!this.isNonInteractive();return this.node.structure.reduceChildren(e,(n,i)=>i||n.nodeState.dirty(),vn)});touched=c(()=>{let e=this.selfTouched()&&!this.isNonInteractive();return this.node.structure.reduceChildren(e,(n,i)=>i||n.nodeState.touched(),vn)});disabledReasons=c(()=>[...this.node.structure.parent?.nodeState.disabledReasons()??[],...this.node.logicNode.logic.disabledReasons.compute(this.node.context)]);disabled=c(()=>!!this.disabledReasons().length);readonly=c(()=>(this.node.structure.parent?.nodeState.readonly()||this.node.logicNode.logic.readonly.compute(this.node.context))??!1);hidden=c(()=>(this.node.structure.parent?.nodeState.hidden()||this.node.logicNode.logic.hidden.compute(this.node.context))??!1);name=c(()=>{let e=this.node.structure.parent;return e?`${e.name()}.${this.node.structure.keyInParent()}`:this.node.structure.fieldManager.rootName});debouncer=c(()=>{if(this.node.logicNode.logic.hasMetadata(vt)){let n=this.node.logicNode.logic.getMetadata(vt).compute(this.node.context);if(n)return i=>n(this.node.context,i)}return this.node.structure.parent?.nodeState.debouncer?.()});isNonInteractive=c(()=>this.hidden()||this.disabled()||this.readonly())},xt=class{newRoot(e,n,i,a){return new Ve({kind:"root",fieldManager:e,value:n,pathNode:i,logic:i.builder.build(),fieldAdapter:a})}newChild(e){return new Ve(e)}createNodeState(e){return new Pt(e)}createValidationState(e){return new yt(e)}createStructure(e,n){return e.createStructure(n)}},Et=class{injector;rootName;constructor(e,n){this.injector=e,this.rootName=n??`${this.injector.get(Lt)}.form${Ri++}`}structures=new Set;createFieldManagementEffect(e){ie(()=>{let n=new Set;this.markStructuresLive(e,n);for(let i of this.structures)n.has(i)||(this.structures.delete(i),b(()=>i.destroy()))},{injector:this.injector})}markStructuresLive(e,n){n.add(e);for(let i of e.children())this.markStructuresLive(i.structure,n)}},Ri=0;function Ii(t){let e,n,i;return t.length===3?[e,n,i]=t:t.length===2?bi(t[1])?[e,n]=t:[e,i]=t:[e]=t,[e,n,i]}function W(...t){let[e,n,i]=Ii(t),a=i?.injector??C(te),u=ot(a,()=>Ee.rootCompile(n)),p=new Et(a,i?.name),E=i?.adapter??new xt,L=Ve.newRoot(p,e,u,E);return p.createFieldManagementEffect(L.structure),L.fieldProxy}function Ft(t,e){Fe(t);let n=B.unwrapFieldPath(t).getChild(Q).fieldPathProxy;Nn(n,e)}function Nn(t,e){Fe(t),B.unwrapFieldPath(t).mergeIn(Ee.create(e))}async function ne(t,e){let n=t();if(!b(()=>(Rn(n),n.invalid()))){n.submitState.selfSubmitting.set(!0);try{let a=await e(t);a&&ki(n,a)}finally{n.submitState.selfSubmitting.set(!1)}}}function ki(t,e){H(e)||(e=[e]);let n=new Map;for(let i of e){let a=Fn(i,t.fieldProxy),u=a.fieldTree(),p=n.get(u);p||(p=[],n.set(u,p)),p.push(a)}for(let[i,a]of n)i.submitState.submissionErrors.set(a)}function Rn(t){if(!t.validationState.shouldSkipValidation()){t.markAsTouched();for(let e of t.structure.children())Rn(e)}}var Oi=new ee("");var At=class{field;constructor(e){this.field=e}control=this;get value(){return this.field().value()}get valid(){return this.field().valid()}get invalid(){return this.field().invalid()}get pending(){return this.field().pending()}get disabled(){return this.field().disabled()}get enabled(){return!this.field().disabled()}get errors(){let e=this.field().errors();if(e.length===0)return null;let n={};for(let i of e)n[i.kind]=i;return n}get pristine(){return!this.field().dirty()}get dirty(){return this.field().dirty()}get touched(){return this.field().touched()}get untouched(){return!this.field().touched()}get status(){if(this.field().disabled())return"DISABLED";if(this.field().valid())return"VALID";if(this.field().invalid())return"INVALID";if(this.field().pending())return"PENDING";throw new S(1910,!1)}valueAccessor=null;hasValidator(e){return e===ke.required?this.field().required():!1}updateValueAndValidity(){}},Ti=new ee(""),Li={create:K,update:Ut},_e=(()=>{class t{element=C(Tt).nativeElement;injector=C(te);formField=v.required();state=c(()=>this.formField()());bindingOptions=j(void 0);[jt]=Li;config=C(Oi,{optional:!0});classes=Object.entries(this.config?.classes??{}).map(([n,i])=>[n,c(()=>i(this))]);controlValueAccessors=C(ln,{optional:!0,self:!0});interopNgControl;get \u0275interopControl(){return this.controlValueAccessors?.[0]??this.interopNgControl?.valueAccessor??void 0}getOrCreateNgControl(){return this.interopNgControl??=new At(this.state)}registerAsBinding(n){if(b(this.bindingOptions))throw new S(1913,!1);this.bindingOptions.set(n),ie(i=>{let a=this.state();a.nodeState.formFieldBindings.update(u=>[...u,this]),i(()=>{a.nodeState.formFieldBindings.update(u=>u.filter(p=>p!==this))})},{injector:this.injector})}focus(){let n=b(this.bindingOptions);n?.focus?n.focus():this.element.focus()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=Bt({type:t,selectors:[["","formField",""]],inputs:{formField:[1,"formField"]},features:[Ae([{provide:Ti,useExisting:t},{provide:Te,useFactory:()=>C(t).getOrCreateNgControl()}])]})}return t})();function ye(t,e){Fe(t),B.unwrapFieldPath(t).builder.addDisabledReasonRule(i=>{let a=!0;return typeof e=="string"?a=e:e&&(a=e(i)),typeof a=="string"?{fieldTree:i.fieldTree,message:a}:a?{fieldTree:i.fieldTree}:void 0})}var ji=(t,e)=>e.url;function Bi(t,e){if(t&1&&(r(0,"li")(1,"a",2),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit;l(),g("routerLink",y(2,2,n.url)),l(2),d(n.title)}}function Gi(t,e){if(t&1&&(r(0,"ul",0),V(1,Bi,4,4,"li",null,ji),o()),t&2){let n=m();l(),F(n.data())}}function Ui(t,e){t&1&&(r(0,"p",1),s(1,"Not Found!!"),o())}var qe=class t{data=v.required();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-films-list"]],inputs:{data:[1,"data"]},decls:2,vars:1,consts:[[1,"_data-list"],[1,"_empty-message"],[3,"routerLink"]],template:function(n,i){n&1&&h(0,Gi,3,0,"ul",0)(1,Ui,2,0,"p",1),n&2&&f(i.data().length>0?0:1)},dependencies:[x,N],encapsulation:2,changeDetection:0})};var In=()=>[],Hi=()=>({page:null}),kn=t=>({page:t});function $i(t,e){if(t&1&&(r(0,"b"),s(1,"No. of items: "),o(),r(2,"span",8),s(3),_(4,"number"),o()),t&2){let n=m();l(3),d(y(4,1,n.resource.value().count))}}function zi(t,e){t&1&&(r(0,"b",6),s(1,"Error"),o())}function qi(t,e){t&1&&(r(0,"b",7),s(1,"Loading"),o())}function Wi(t,e){if(t&1&&D(0,"app-films-list",12),t&2){let n=m();g("data",n.resource.value().results)}}function Ki(t,e){t&1&&(r(0,"p",13),s(1),o()),t&2&&(l(),d(e.message))}var We=class t{search=v();page=v();params=c(()=>({search:this.search()??"",page:this.page()??""}));resource=Jt(()=>z(this.params())).asReadonly();currentPage=c(()=>+(this.params().page?this.params().page:"1"));previousPage=c(()=>this.resource.hasValue()&&this.resource.value().previous?new URL(this.resource.value().previous).searchParams.get("page"):null);nextPage=c(()=>this.resource.hasValue()&&this.resource.value().next?new URL(this.resource.value().next).searchParams.get("page"):null);form=W(I(()=>({search:this.params().search})),e=>{ye(e,()=>this.resource.isLoading())});router=C(le);onSearch(){ne(this.form,async e=>{this.router.navigate([],{queryParams:z(e().value()),replaceUrl:!0})})}clearSearch(){this.form.search().value.set(""),this.onSearch()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-films-list-page"]],inputs:{search:[1,"search"],page:[1,"page"]},decls:28,vars:19,consts:[[3,"submit"],[1,"_search-fieldset",3,"disabled"],["type","text","placeholder","Search","aria-label","Search",3,"formField"],["type","button",1,"app-cmp-button","app-cl-warn",3,"click"],[1,"material-symbols-outlined"],[1,"_page-navigation"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cl-number"],[1,"app-cmp-nav"],["queryParamsHandling","merge","replaceUrl","","aria-label","Previous Page",3,"routerLink","queryParams"],["queryParamsHandling","merge","replaceUrl","","aria-label","Next Page",3,"routerLink","queryParams"],[3,"data"],[1,"_error-message"]],template:function(n,i){if(n&1&&(r(0,"header")(1,"form",0),A("submit",function(u){return u.preventDefault()})("submit",function(){return i.onSearch()}),r(2,"fieldset",1),D(3,"input",2),K(),r(4,"button",3),A("click",function(){return i.clearSearch()}),r(5,"i",4),s(6,"close"),o()()()(),r(7,"nav",5)(8,"span"),h(9,$i,5,3)(10,zi,2,0,"b",6)(11,qi,2,0,"b",7),r(12,"b"),s(13," | Page: "),o(),r(14,"span",8),s(15),_(16,"number"),o()(),r(17,"ul",9)(18,"li")(19,"a",10)(20,"i",4),s(21,"chevron_backward"),o()()(),r(22,"li")(23,"a",11)(24,"i",4),s(25,"chevron_forward"),o()()()()()(),h(26,Wi,1,1,"app-films-list",12)(27,Ki,2,1,"p",13)),n&2){let a;l(2),g("disabled",i.form().disabled()),l(),re(i.form.search,"formField"),l(6),f(i.resource.hasValue()?9:i.resource.error()?10:i.resource.isLoading()?11:-1),l(6),d(y(16,10,i.currentPage())),l(4),g("routerLink",i.previousPage()?O(12,In):null)("queryParams",i.previousPage()==="1"?O(13,Hi):P(14,kn,i.previousPage())),l(4),g("routerLink",i.nextPage()?O(16,In):null)("queryParams",P(17,kn,i.nextPage())),l(3),f(i.resource.hasValue()?26:(a=i.resource.error())?27:-1,a)}},dependencies:[qe,_e,x,se],encapsulation:2,changeDetection:0})};function Yi(t,e){if(t&1&&(r(0,"li")(1,"a",2),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit;l(),g("routerLink",y(2,2,n.url)),l(2),d(n.name)}}function Zi(t,e){if(t&1&&(r(0,"ul",0),V(1,Yi,4,4,"li",null,Y),o()),t&2){let n=m();l(),F(n.data())}}function Xi(t,e){t&1&&(r(0,"p",1),s(1,"Not Found!!"),o())}var Ke=class t{data=v.required();injector=C(te);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-people-list"]],inputs:{data:[1,"data"]},decls:2,vars:1,consts:[[1,"_data-list"],[1,"_empty-message"],[3,"routerLink"]],template:function(n,i){n&1&&h(0,Zi,3,0,"ul",0)(1,Xi,2,0,"p",1),n&2&&f(i.data().length>0?0:1)},dependencies:[x,N],styles:["@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{._empty-message[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{._empty-message[_ngcontent-%COMP%]{--_column-gap: var(--app-column-gap)}}._empty-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;column-gap:var(--_column-gap);font-size:xx-large;font-weight:600;margin-top:64px}._empty-message[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:xx-large}@layer{._data-list[_ngcontent-%COMP%]{--_font: var(--app-font);--_color: var(--app-on-surface-color);--_on-hover-background-color: var(--app-surface-container-color);--_font-size: var(--app-font-size);--_row-gap: var(--app-row-gap)}}@layer{._data-list[_ngcontent-%COMP%]:is(ul){box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._data-list[_ngcontent-%COMP%]:is(ul){display:flex;flex-direction:column;align-items:stretch;row-gap:var(--_row-gap)}@layer{._data-list[_ngcontent-%COMP%]:is(ul) > li[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{._data-list[_ngcontent-%COMP%]:is(ul) > li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._data-list[_ngcontent-%COMP%]:is(ul) > li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:.5em 1ch;height:100%;color:var(--_color);font-family:var(--_font);font-size:var(--_font-size);text-decoration:none;border:none;border-radius:4px}._data-list[_ngcontent-%COMP%]:is(ul) > li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover:not(:is(:disabled,a:not([href]))){background-color:var(--_on-hover-background-color)}._data-list[_ngcontent-%COMP%]:is(ul) > li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:is(:disabled,a:not([href])){opacity:.25;cursor:not-allowed}"],changeDetection:0})};var On=()=>[],Qi=()=>({page:null}),Tn=t=>({page:t});function Ji(t,e){if(t&1&&(r(0,"b"),s(1,"No. of items: "),o(),r(2,"span",8),s(3),_(4,"number"),o()),t&2){let n=m();l(3),d(y(4,1,n.resource.value().count))}}function er(t,e){t&1&&(r(0,"b",6),s(1,"Error"),o())}function tr(t,e){t&1&&(r(0,"b",7),s(1,"Loading"),o())}function nr(t,e){if(t&1&&D(0,"app-people-list",12),t&2){let n=m();g("data",n.resource.value().results)}}function ir(t,e){t&1&&(r(0,"p",13),s(1),o()),t&2&&(l(),d(e.message))}var Ye=class t{search=v();page=v();params=c(()=>({search:this.search()??"",page:this.page()??""}));resource=Xt(()=>z(this.params())).asReadonly();currentPage=c(()=>+(this.params().page?this.params().page:"1"));previousPage=c(()=>this.resource.hasValue()&&this.resource.value().previous?new URL(this.resource.value().previous).searchParams.get("page"):null);nextPage=c(()=>this.resource.hasValue()&&this.resource.value().next?new URL(this.resource.value().next).searchParams.get("page"):null);form=W(I(()=>({search:this.params().search})),e=>{ye(e,()=>this.resource.isLoading())});router=C(le);onSearch(){ne(this.form,async e=>{this.router.navigate([],{queryParams:z(e().value()),replaceUrl:!0})})}clearSearch(){this.form.search().value.set(""),this.onSearch()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-people-list-page"]],inputs:{search:[1,"search"],page:[1,"page"]},decls:28,vars:19,consts:[[3,"submit"],[1,"_search-fieldset",3,"disabled"],["type","text","placeholder","Search","aria-label","Search",3,"formField"],["type","button",1,"app-cmp-button","app-cl-warn",3,"click"],[1,"material-symbols-outlined"],[1,"_page-navigation"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cl-number"],[1,"app-cmp-nav"],["queryParamsHandling","merge","replaceUrl","","aria-label","Previous Page",3,"routerLink","queryParams"],["queryParamsHandling","merge","replaceUrl","","aria-label","Next Page",3,"routerLink","queryParams"],[3,"data"],[1,"_error-message"]],template:function(n,i){if(n&1&&(r(0,"header")(1,"form",0),A("submit",function(u){return u.preventDefault()})("submit",function(){return i.onSearch()}),r(2,"fieldset",1),D(3,"input",2),K(),r(4,"button",3),A("click",function(){return i.clearSearch()}),r(5,"i",4),s(6,"close"),o()()()(),r(7,"nav",5)(8,"span"),h(9,Ji,5,3)(10,er,2,0,"b",6)(11,tr,2,0,"b",7),r(12,"b"),s(13," | Page: "),o(),r(14,"span",8),s(15),_(16,"number"),o()(),r(17,"ul",9)(18,"li")(19,"a",10)(20,"i",4),s(21,"chevron_backward"),o()()(),r(22,"li")(23,"a",11)(24,"i",4),s(25,"chevron_forward"),o()()()()()(),h(26,nr,1,1,"app-people-list",12)(27,ir,2,1,"p",13)),n&2){let a;l(2),g("disabled",i.form().disabled()),l(),re(i.form.search,"formField"),l(6),f(i.resource.hasValue()?9:i.resource.error()?10:i.resource.isLoading()?11:-1),l(6),d(y(16,10,i.currentPage())),l(4),g("routerLink",i.previousPage()?O(12,On):null)("queryParams",i.previousPage()==="1"?O(13,Qi):P(14,Tn,i.previousPage())),l(4),g("routerLink",i.nextPage()?O(16,On):null)("queryParams",P(17,Tn,i.nextPage())),l(3),f(i.resource.hasValue()?26:(a=i.resource.error())?27:-1,a)}},dependencies:[Ke,_e,x,se],styles:['@layer{[_nghost-%COMP%]{--_load-color: var(--app-primary-color);--_warn-color: var(--app-warn-color)}}._status-warning[_ngcontent-%COMP%]{font-weight:700;color:var(--_warn-color)}._status-warning[_ngcontent-%COMP%]:before{content:"warning"}@layer{._status-warning[_ngcontent-%COMP%]:before{--_icon-variantion: var(--app-icon-variation)}}._status-warning[_ngcontent-%COMP%]:before{font-family:Material Symbols Outlined;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-moz-font-feature-settings:"liga";font-feature-settings:"liga";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smooth:antialiased;text-rendering:optimizeLegibility;font-variation-settings:var(--_icon-variantion);font-size:inherit!important;transform:translateY(10%)}@keyframes _ngcontent-%COMP%_dots{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}to{content:""}}._status-loading[_ngcontent-%COMP%]{display:inline-block;width:10ch;font-weight:700;color:var(--_load-color)}._status-loading[_ngcontent-%COMP%]:after{content:"";animation:_ngcontent-%COMP%_dots 1.5s steps(1,end) infinite}@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{[_nghost-%COMP%]{--_column-gap: var(--app-column-gap);--_row-gap: var(--app-row-gap)}}@layer{[_nghost-%COMP%] > header[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}[_nghost-%COMP%] > header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;row-gap:var(--_row-gap)}@layer{._search-fieldset[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._search-fieldset[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch}._search-fieldset[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{flex:1 0 auto}@layer{._page-navigation[_ngcontent-%COMP%]{--_warn-color: var(--app-warn-color);--_column-gap: var(--app-column-gap)}}@layer{._page-navigation[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._page-navigation[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:end;column-gap:var(--_column-gap)}@layer{._error-message[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{._error-message[_ngcontent-%COMP%]{--_column-gap: var(--app-column-gap)}}._error-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;column-gap:var(--_column-gap);font-size:xx-large;font-weight:600;margin-top:64px}._error-message[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:xx-large}'],changeDetection:0})};var Ln=t=>["planets",t],Nt=t=>["films",t];function rr(t,e){if(t&1&&(r(0,"a",2),_(1,"extractId"),s(2),o()),t&2){let n=m(),i=m();g("routerLink",P(5,Ln,y(1,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.name)}}function or(t,e){t&1&&h(0,rr,3,7,"a",2),t&2&&f(e?0:-1)}function ar(t,e){t&1&&(r(0,"span",1),s(1,"Loading"),o())}function sr(t,e){if(t&1&&(r(0,"a",2),_(1,"extractId"),s(2),o()),t&2){let n=m();g("routerLink",P(5,Ln,y(1,3,n.homeworldResource.value().url)))("relativeTo",n.moduleRoute()),l(2),d(n.homeworldResource.value().name)}}function lr(t,e){t&1&&(r(0,"span",3),s(1),o()),t&2&&(l(),d(e.message))}function dr(t,e){t&1&&(r(0,"span",1),s(1,"Loading"),o())}function ur(t,e){if(t&1&&(r(0,"li")(1,"a",2),_(2,"extractId"),s(3),o()()),t&2){let n=e,i=m(2);l(),g("routerLink",P(5,Nt,y(2,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.title)}}function cr(t,e){t&1&&(r(0,"li")(1,"span",1),s(2,"Loading"),o()())}function pr(t,e){if(t&1&&(h(0,ur,4,7,"li"),_(1,"async"),lt(2,cr,3,0,"li")),t&2){let n,i=e.$implicit;f((n=y(1,1,i))?0:2,n)}}function mr(t,e){if(t&1&&(r(0,"li")(1,"a",2),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit,i=m(2);l(),g("routerLink",P(5,Nt,y(2,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.title)}}function hr(t,e){if(t&1&&(r(0,"ul"),V(1,mr,4,7,"li",null,Y),o()),t&2){let n=m();l(),F(n.filmsResource.value())}}function fr(t,e){t&1&&(r(0,"span",3),s(1),o()),t&2&&(l(),d(e.message))}function gr(t,e){t&1&&(r(0,"span",1),s(1,"Loading"),o())}function _r(t,e){if(t&1&&(r(0,"a",2),_(1,"extractId"),s(2),o()),t&2){m();let n=qt(0),i=m();g("routerLink",P(5,Nt,y(1,3,n.value().url)))("relativeTo",i.moduleRoute()),l(2),d(n.value().title)}}function yr(t,e){t&1&&(r(0,"span",3),s(1),o()),t&2&&(l(),d(e.message))}function vr(t,e){t&1&&(r(0,"span",1),s(1,"Loading"),o())}function Cr(t,e){if(t&1&&($t(0),r(1,"li"),h(2,_r,3,7,"a",2)(3,yr,2,1,"span",3)(4,vr,2,0,"span",1),o()),t&2){let n,i=e.$implicit,a=zt(i().metadata(m().filmResourceKey));l(2),f(a.hasValue()?2:(n=a.error())?3:a.isLoading()?4:-1,n)}}var Ze=class t{data=v.required();moduleRoute=v.required();asyncData=c(()=>{let{homeworld:e,films:n}=this.data();return{homeworld$:U(e),films:n.map(i=>U(i))}});homeworldResource=G(()=>this.data().homeworld??void 0).asReadonly();filmsResource=$({params:()=>this.data().films,loader:async({params:e,abortSignal:n})=>await Promise.all(e.map(async i=>await U(i,n)))}).asReadonly();filmResourceKey=Vt(e=>{let n=G(()=>e().value()),i=ie(a=>{e().fieldTree(),a(()=>{i.destroy(),n.destroy()})});return n.asReadonly()});filmsForm=W(I(()=>this.data().films),e=>{Ft(e,n=>{St(n,this.filmResourceKey,i=>i)})});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-person-view"]],inputs:{data:[1,"data"],moduleRoute:[1,"moduleRoute"]},decls:75,vars:19,consts:[[1,"_data-view"],[1,"_status-loading"],[1,"app-cmp-link",3,"routerLink","relativeTo"],[1,"_status-warning"]],template:function(n,i){if(n&1&&(D(0,"hr"),r(1,"dl",0)(2,"dt"),s(3,"Name"),o(),r(4,"dd"),s(5),o(),r(6,"dt"),s(7,"Birth Year"),o(),r(8,"dd"),s(9),o(),r(10,"dt"),s(11,"Eye Color"),o(),r(12,"dd"),s(13),o(),r(14,"dt"),s(15,"Gender"),o(),r(16,"dd"),s(17),o(),r(18,"dt"),s(19,"Hair Color"),o(),r(20,"dd"),s(21),o(),r(22,"dt"),s(23,"Height"),o(),r(24,"dd"),s(25),o(),r(26,"dt"),s(27,"Mass"),o(),r(28,"dd"),s(29),o(),r(30,"dt"),s(31,"Skin Color"),o(),r(32,"dd"),s(33),o(),r(34,"dt"),s(35,"Homeworld (async)"),o(),r(36,"dd"),h(37,or,1,1),_(38,"async"),lt(39,ar,2,0,"span",1),o(),r(40,"dt"),s(41,"Homeworld (resource)"),o(),r(42,"dd"),h(43,sr,3,7,"a",2)(44,lr,2,1,"span",3)(45,dr,2,0,"span",1),o(),r(46,"dt"),s(47,"Films (async)"),o(),r(48,"dd")(49,"ul"),V(50,pr,3,3,null,null,Y),o()(),r(52,"dt"),s(53,"Films (resource)"),o(),r(54,"dd"),h(55,hr,3,0,"ul")(56,fr,2,1,"span",3)(57,gr,2,0,"span",1),o(),r(58,"dt"),s(59,"Films (form)"),o(),r(60,"dd")(61,"ul"),V(62,Cr,5,2,"li",null,Y),o()(),r(64,"dt"),s(65,"Created"),o(),r(66,"dd"),s(67),_(68,"date"),o(),r(69,"dt"),s(70,"Edited"),o(),r(71,"dd"),s(72),_(73,"date"),o()(),D(74,"hr")),n&2){let a,u,p;l(5),d(i.data().name),l(4),d(i.data().birth_year),l(4),d(i.data().eye_color),l(4),d(i.data().gender),l(4),d(i.data().hair_color),l(4),d(i.data().height),l(4),d(i.data().mass),l(4),d(i.data().skin_color),l(4),f((a=y(38,13,i.asyncData().homeworld$))?37:39,a),l(6),f(i.homeworldResource.hasValue()?43:(u=i.homeworldResource.error())?44:i.homeworldResource.isLoading()?45:-1,u),l(7),F(i.asyncData().films),l(5),f(i.filmsResource.hasValue()?55:(p=i.filmsResource.error())?56:i.filmsResource.isLoading()?57:-1,p),l(7),F(i.filmsForm),l(5),d(y(68,15,i.data().created)),l(5),d(y(73,17,i.data().edited))}},dependencies:[x,Wt,ae,N],styles:['@layer{[_nghost-%COMP%]{--_load-color: var(--app-primary-color);--_warn-color: var(--app-warn-color)}}._status-warning[_ngcontent-%COMP%]{font-weight:700;color:var(--_warn-color)}._status-warning[_ngcontent-%COMP%]:before{content:"warning"}@layer{._status-warning[_ngcontent-%COMP%]:before{--_icon-variantion: var(--app-icon-variation)}}._status-warning[_ngcontent-%COMP%]:before{font-family:Material Symbols Outlined;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-moz-font-feature-settings:"liga";font-feature-settings:"liga";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smooth:antialiased;text-rendering:optimizeLegibility;font-variation-settings:var(--_icon-variantion);font-size:inherit!important;transform:translateY(10%)}@keyframes _ngcontent-%COMP%_dots{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}to{content:""}}._status-loading[_ngcontent-%COMP%]{display:inline-block;width:10ch;font-weight:700;color:var(--_load-color)}._status-loading[_ngcontent-%COMP%]:after{content:"";animation:_ngcontent-%COMP%_dots 1.5s steps(1,end) infinite}@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{[_nghost-%COMP%]{--_warn-color: var(--app-warn-color)}}@layer{._data-view[_ngcontent-%COMP%]{--_column-gap: var(--app-column-gap);--_row-gap: var(--app-row-gap)}}._data-view[_ngcontent-%COMP%]:is(dl){display:grid;align-items:baseline;grid-template-columns:auto 1fr;column-gap:var(--_column-gap);row-gap:var(--_row-gap)}._data-view[_ngcontent-%COMP%]:is(dl) > dt[_ngcontent-%COMP%]{font-weight:700}._data-view[_ngcontent-%COMP%]:is(dl) > dd[_ngcontent-%COMP%]{margin-left:0}@layer{._data-view[_ngcontent-%COMP%]:is(dl) > dd[_ngcontent-%COMP%]{text-align:justify}}'],changeDetection:0})};function br(t,e){t&1&&(r(0,"b",1),s(1,"Error"),o())}function wr(t,e){t&1&&(r(0,"b",2),s(1,"Loading"),o())}function Dr(t,e){if(t&1&&D(0,"app-person-view",6),t&2){let n=m();g("data",n.resource.value())("moduleRoute",n.moduleRoute)}}function Mr(t,e){t&1&&(r(0,"p",7),s(1),o()),t&2&&(l(),d(e.message))}var Xe=class t{id=v.required();moduleRoute=C(Z);resource=Qt(this.id).asReadonly();location=C(oe);goBack(){this.location.back()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-person-view-page"]],inputs:{id:[1,"id"]},decls:13,vars:2,consts:[[1,"_page-navigation"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cmp-nav"],["type","button",3,"click"],[1,"material-symbols-outlined"],[3,"data","moduleRoute"],[1,"_error-message"]],template:function(n,i){if(n&1&&(r(0,"header")(1,"nav",0)(2,"span"),h(3,br,2,0,"b",1)(4,wr,2,0,"b",2),o(),r(5,"ul",3)(6,"li")(7,"button",4),A("click",function(){return i.goBack()}),r(8,"i",5),s(9,"chevron_backward"),o(),s(10," Back "),o()()()()(),h(11,Dr,1,2,"app-person-view",6)(12,Mr,2,1,"p",7)),n&2){let a;l(3),f(i.resource.error()?3:i.resource.isLoading()?4:-1),l(8),f(i.resource.hasValue()?11:(a=i.resource.error())?12:-1,a)}},dependencies:[Ze],styles:['@layer{[_nghost-%COMP%]{--_load-color: var(--app-primary-color);--_warn-color: var(--app-warn-color)}}._status-warning[_ngcontent-%COMP%]{font-weight:700;color:var(--_warn-color)}._status-warning[_ngcontent-%COMP%]:before{content:"warning"}@layer{._status-warning[_ngcontent-%COMP%]:before{--_icon-variantion: var(--app-icon-variation)}}._status-warning[_ngcontent-%COMP%]:before{font-family:Material Symbols Outlined;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-moz-font-feature-settings:"liga";font-feature-settings:"liga";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-smooth:antialiased;text-rendering:optimizeLegibility;font-variation-settings:var(--_icon-variantion);font-size:inherit!important;transform:translateY(10%)}@keyframes _ngcontent-%COMP%_dots{0%{content:""}25%{content:"."}50%{content:".."}75%{content:"..."}to{content:""}}._status-loading[_ngcontent-%COMP%]{display:inline-block;width:10ch;font-weight:700;color:var(--_load-color)}._status-loading[_ngcontent-%COMP%]:after{content:"";animation:_ngcontent-%COMP%_dots 1.5s steps(1,end) infinite}@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{[_nghost-%COMP%]{--_column-gap: var(--app-column-gap);--_row-gap: var(--app-row-gap)}}@layer{[_nghost-%COMP%] > header[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}[_nghost-%COMP%] > header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;row-gap:var(--_row-gap)}@layer{._page-navigation[_ngcontent-%COMP%]{--_warn-color: var(--app-warn-color);--_column-gap: var(--app-column-gap)}}@layer{._page-navigation[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}._page-navigation[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:end;column-gap:var(--_column-gap)}@layer{._error-message[_ngcontent-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}@layer{._error-message[_ngcontent-%COMP%]{--_column-gap: var(--app-column-gap)}}._error-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;column-gap:var(--_column-gap);font-size:xx-large;font-weight:600;margin-top:64px}._error-message[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:xx-large}'],changeDetection:0})};var Pr=t=>["people",t],xr=t=>["films",t],jn=(t,e)=>e.url;function Er(t,e){if(t&1&&(r(0,"li")(1,"a",3),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit,i=m(3);l(),g("routerLink",P(5,Pr,y(2,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.name)}}function Sr(t,e){if(t&1&&(r(0,"ul"),V(1,Er,4,7,"li",null,jn),o()),t&2){let n=m(2);l(),F(n.residentsResource.value())}}function Vr(t,e){t&1&&(r(0,"span"),s(1,"None"),o())}function Fr(t,e){if(t&1&&h(0,Sr,3,0,"ul")(1,Vr,2,0,"span"),t&2){let n=m();f(n.residentsResource.value().length>0?0:1)}}function Ar(t,e){t&1&&(r(0,"span",1),s(1),o()),t&2&&(l(),d(e.message))}function Nr(t,e){t&1&&(r(0,"span",2),s(1,"Loading"),o())}function Rr(t,e){if(t&1&&(r(0,"li")(1,"a",3),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit,i=m(3);l(),g("routerLink",P(5,xr,y(2,3,n.url)))("relativeTo",i.moduleRoute()),l(2),d(n.title)}}function Ir(t,e){if(t&1&&(r(0,"ul"),V(1,Rr,4,7,"li",null,jn),o()),t&2){let n=m(2);l(),F(n.filmsResource.value())}}function kr(t,e){t&1&&(r(0,"span"),s(1,"None"),o())}function Or(t,e){if(t&1&&h(0,Ir,3,0,"ul")(1,kr,2,0,"span"),t&2){let n=m();f(n.filmsResource.value().length>0?0:1)}}function Tr(t,e){t&1&&(r(0,"span",1),s(1),o()),t&2&&(l(),d(e.message))}function Lr(t,e){t&1&&(r(0,"span",2),s(1,"Loading"),o())}var Qe=class t{data=v.required();moduleRoute=v.required();residentsResource=$({params:()=>this.data().residents,loader:async({params:e,abortSignal:n})=>await Promise.all(e.map(async i=>await U(i,n)))}).asReadonly();filmsResource=$({params:()=>this.data().films,loader:async({params:e,abortSignal:n})=>await Promise.all(e.map(async i=>await U(i,n)))}).asReadonly();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-planet-view"]],inputs:{data:[1,"data"],moduleRoute:[1,"moduleRoute"]},decls:61,vars:17,consts:[[1,"_data-view"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cmp-link",3,"routerLink","relativeTo"]],template:function(n,i){if(n&1&&(D(0,"hr"),r(1,"dl",0)(2,"dt"),s(3,"Name"),o(),r(4,"dd"),s(5),o(),r(6,"dt"),s(7,"Diameter"),o(),r(8,"dd"),s(9),o(),r(10,"dt"),s(11,"Rotation Period"),o(),r(12,"dd"),s(13),o(),r(14,"dt"),s(15,"Orbital Period"),o(),r(16,"dd"),s(17),o(),r(18,"dt"),s(19,"Gravity"),o(),r(20,"dd"),s(21),o(),r(22,"dt"),s(23,"Population"),o(),r(24,"dd"),s(25),o(),r(26,"dt"),s(27,"Climate"),o(),r(28,"dd"),s(29),o(),r(30,"dt"),s(31,"Terrain"),o(),r(32,"dd"),s(33),o(),r(34,"dt"),s(35,"Surface Water"),o(),r(36,"dd"),s(37),o(),r(38,"dt"),s(39,"Residents"),o(),r(40,"dd"),h(41,Fr,2,1)(42,Ar,2,1,"span",1)(43,Nr,2,0,"span",2),o(),r(44,"dt"),s(45,"Films"),o(),r(46,"dd"),h(47,Or,2,1)(48,Tr,2,1,"span",1)(49,Lr,2,0,"span",2),o(),r(50,"dt"),s(51,"Created"),o(),r(52,"dd"),s(53),_(54,"date"),o(),r(55,"dt"),s(56,"Edited"),o(),r(57,"dd"),s(58),_(59,"date"),o()(),D(60,"hr")),n&2){let a,u;l(5),d(i.data().name),l(4),d(i.data().diameter),l(4),d(i.data().rotation_period),l(4),d(i.data().orbital_period),l(4),d(i.data().gravity),l(4),d(i.data().population),l(4),d(i.data().climate),l(4),d(i.data().terrain),l(4),d(i.data().surface_water),l(4),f(i.residentsResource.hasValue()?41:(a=i.residentsResource.error())?42:i.residentsResource.isLoading()?43:-1,a),l(6),f(i.filmsResource.hasValue()?47:(u=i.filmsResource.error())?48:i.filmsResource.isLoading()?49:-1,u),l(6),d(y(54,13,i.data().created)),l(5),d(y(59,15,i.data().edited))}},dependencies:[x,ae,N],encapsulation:2,changeDetection:0})};function jr(t,e){t&1&&(r(0,"b",1),s(1,"Error"),o())}function Br(t,e){t&1&&(r(0,"b",2),s(1,"Loading"),o())}function Gr(t,e){if(t&1&&D(0,"app-planet-view",6),t&2){let n=m();g("data",n.resource.value())("moduleRoute",n.moduleRoute)}}function Ur(t,e){t&1&&(r(0,"p",7),s(1),o()),t&2&&(l(),d(e.message))}var Je=class t{id=v.required();moduleRoute=C(Z);resource=nn(this.id).asReadonly();location=C(oe);goBack(){this.location.back()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-planet-view-page"]],inputs:{id:[1,"id"]},decls:13,vars:2,consts:[[1,"_page-navigation"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cmp-nav"],["type","button",3,"click"],[1,"material-symbols-outlined"],[3,"data","moduleRoute"],[1,"_error-message"]],template:function(n,i){if(n&1&&(r(0,"header")(1,"nav",0)(2,"span"),h(3,jr,2,0,"b",1)(4,Br,2,0,"b",2),o(),r(5,"ul",3)(6,"li")(7,"button",4),A("click",function(){return i.goBack()}),r(8,"i",5),s(9,"chevron_backward"),o(),s(10," Back "),o()()()()(),h(11,Gr,1,2,"app-planet-view",6)(12,Ur,2,1,"p",7)),n&2){let a;l(3),f(i.resource.error()?3:i.resource.isLoading()?4:-1),l(8),f(i.resource.hasValue()?11:(a=i.resource.error())?12:-1,a)}},dependencies:[Qe],encapsulation:2,changeDetection:0})};function Hr(t,e){if(t&1&&(r(0,"li")(1,"a",2),_(2,"extractId"),s(3),o()()),t&2){let n=e.$implicit;l(),g("routerLink",y(2,2,n.url)),l(2),d(n.name)}}function $r(t,e){if(t&1&&(r(0,"ul",0),V(1,Hr,4,4,"li",null,Y),o()),t&2){let n=m();l(),F(n.data())}}function zr(t,e){t&1&&(r(0,"p",1),s(1,"Not Found!!"),o())}var et=class t{data=v.required();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-planets-list"]],inputs:{data:[1,"data"]},decls:2,vars:1,consts:[[1,"_data-list"],[1,"_empty-message"],[3,"routerLink"]],template:function(n,i){n&1&&h(0,$r,3,0,"ul",0)(1,zr,2,0,"p",1),n&2&&f(i.data().length>0?0:1)},dependencies:[x,N],encapsulation:2,changeDetection:0})};var Bn=()=>[],qr=()=>({page:null}),Gn=t=>({page:t});function Wr(t,e){if(t&1&&(r(0,"b"),s(1,"No. of items: "),o(),r(2,"span",8),s(3),_(4,"number"),o()),t&2){let n=m();l(3),d(y(4,1,n.resource.value().count))}}function Kr(t,e){t&1&&(r(0,"b",6),s(1,"Error"),o())}function Yr(t,e){t&1&&(r(0,"b",7),s(1,"Loading"),o())}function Zr(t,e){if(t&1&&D(0,"app-planets-list",12),t&2){let n=m();g("data",n.resource.value().results)}}function Xr(t,e){t&1&&(r(0,"p",13),s(1),o()),t&2&&(l(),d(e.message))}var tt=class t{search=v();page=v();params=c(()=>({search:this.search()??"",page:this.page()??""}));resource=tn(()=>z(this.params())).asReadonly();currentPage=c(()=>+(this.params().page?this.params().page:"1"));previousPage=c(()=>this.resource.hasValue()&&this.resource.value().previous?new URL(this.resource.value().previous).searchParams.get("page"):null);nextPage=c(()=>this.resource.hasValue()&&this.resource.value().next?new URL(this.resource.value().next).searchParams.get("page"):null);form=W(I(()=>({search:this.params().search})),e=>{ye(e,()=>this.resource.isLoading())});router=C(le);onSearch(){ne(this.form,async e=>{this.router.navigate([],{queryParams:z(e().value()),replaceUrl:!0})})}clearSearch(){this.form.search().value.set(""),this.onSearch()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-planets-list-page"]],inputs:{search:[1,"search"],page:[1,"page"]},decls:28,vars:19,consts:[[3,"submit"],[1,"_search-fieldset",3,"disabled"],["type","text","placeholder","Search","aria-label","Search",3,"formField"],["type","button",1,"app-cmp-button","app-cl-warn",3,"click"],[1,"material-symbols-outlined"],[1,"_page-navigation"],[1,"_status-warning"],[1,"_status-loading"],[1,"app-cl-number"],[1,"app-cmp-nav"],["queryParamsHandling","merge","replaceUrl","","aria-label","Previous Page",3,"routerLink","queryParams"],["queryParamsHandling","merge","replaceUrl","","aria-label","Next Page",3,"routerLink","queryParams"],[3,"data"],[1,"_error-message"]],template:function(n,i){if(n&1&&(r(0,"header")(1,"form",0),A("submit",function(u){return u.preventDefault()})("submit",function(){return i.onSearch()}),r(2,"fieldset",1),D(3,"input",2),K(),r(4,"button",3),A("click",function(){return i.clearSearch()}),r(5,"i",4),s(6,"close"),o()()()(),r(7,"nav",5)(8,"span"),h(9,Wr,5,3)(10,Kr,2,0,"b",6)(11,Yr,2,0,"b",7),r(12,"b"),s(13," | Page: "),o(),r(14,"span",8),s(15),_(16,"number"),o()(),r(17,"ul",9)(18,"li")(19,"a",10)(20,"i",4),s(21,"chevron_backward"),o()()(),r(22,"li")(23,"a",11)(24,"i",4),s(25,"chevron_forward"),o()()()()()(),h(26,Zr,1,1,"app-planets-list",12)(27,Xr,2,1,"p",13)),n&2){let a;l(2),g("disabled",i.form().disabled()),l(),re(i.form.search,"formField"),l(6),f(i.resource.hasValue()?9:i.resource.error()?10:i.resource.isLoading()?11:-1),l(6),d(y(16,10,i.currentPage())),l(4),g("routerLink",i.previousPage()?O(12,Bn):null)("queryParams",i.previousPage()==="1"?O(13,qr):P(14,Gn,i.previousPage())),l(4),g("routerLink",i.nextPage()?O(16,Bn):null)("queryParams",P(17,Gn,i.nextPage())),l(3),f(i.resource.hasValue()?26:(a=i.resource.error())?27:-1,a)}},dependencies:[et,_e,x,se],encapsulation:2,changeDetection:0})};var nt=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=w({type:t,selectors:[["app-star-wars-root"]],features:[Ae([{provide:Z,useFactory:()=>C(Kt)}])],decls:18,vars:0,consts:[[1,"app-cmp-nav"],["routerLinkActive","app-st-active"],["routerLink","people","routerLinkActive","active"],[1,"material-symbols-outlined"],["routerLink","planets","routerLinkActive","active"],["routerLink","films","routerLinkActive","active"]],template:function(n,i){n&1&&(r(0,"nav")(1,"ul",0)(2,"li",1)(3,"a",2)(4,"i",3),s(5,"group"),o(),s(6," People "),o()(),r(7,"li",1)(8,"a",4)(9,"i",3),s(10,"planet"),o(),s(11," Planets "),o()(),r(12,"li",1)(13,"a",5)(14,"i",3),s(15,"videocam"),o(),s(16," Films "),o()()()(),D(17,"router-outlet"))},dependencies:[x,Zt,Yt],styles:["@layer{[_nghost-%COMP%]{box-sizing:border-box;display:block;margin:0;padding:0;border:none}}"],changeDetection:0})};var Qs=[{path:"",component:nt,children:[{path:"",redirectTo:"people",pathMatch:"full"},{path:"people",children:[{path:"",component:Ye},{path:":id",component:Xe}]},{path:"films",children:[{path:"",component:We},{path:":id",component:Re}]},{path:"planets",children:[{path:"",component:tt},{path:":id",component:Je}]}]}];export{Qs as default};
